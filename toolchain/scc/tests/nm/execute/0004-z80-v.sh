#!/bin/sh

set -e

tmp1=`mktemp`
tmp2=`mktemp`
trap "rm -f $tmp1 $tmp2; exit" 0 2 3

nm -v z80.out > $tmp1

cat <<! > $tmp2
                 U text6
0000000000000000 t .text
0000000000000000 d .data
0000000000000000 b .bss
0000000000000000 T text1
0000000000000000 D data1
0000000000000000 B bss1
0000000000000001 T averylongtext
0000000000000001 D averylongdata
0000000000000001 B averylongbss
0000000000000002 t text3
0000000000000002 d data3
0000000000000002 b bss3
000000000000000a C text4
000000000000000a C data4
000000000000000a C bss4
0000000000000012 C text5
0000000000000012 C data5
0000000000000012 C bss5
!

diff $tmp1 $tmp2
